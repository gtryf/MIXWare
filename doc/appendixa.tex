\beginchapter Appendix A. Example Program Listing

The following is the listing of the program |PRIMES.MIXAL|,
as generated by |MIXASM|. End-of-instruction comments have been
stripped in order for it to fit the page.
\bigskip
\beginlisting
\omit\global\usehruletrue&\omit&1&|* Table of primes (TAOCP p. 148, Program P)|\cr
\omit\global\usehruletrue&\omit&2&|*|\cr
\omit\global\usehruletrue&\omit&3&|L       EQU    500|\cr
\omit\global\usehruletrue&\omit&4&|OUTDEV  EQU    18|\cr
\omit\global\usehruletrue&\omit&5&|PRIME   EQU    -1|\cr
\omit\global\usehruletrue&\omit&6&|BUF0    EQU    2000|\cr
\omit\global\usehruletrue&\omit&7&|BUF1    EQU    BUF0+25|\cr
\omit\global\usehruletrue&\omit&8&|        ORIG   3000|\cr
3000&\mixinst$+$.0.0.18.35.&9&|START   IOC    0(OUTDEV)|\cr
3001&\mixinst$+$.2050.0.5.9.&10&|        LD1    =1-L=|\cr
3002&\mixinst$+$.2051.0.5.10.&11&|        LD2    =3=|\cr
3003&\mixinst$+$.1.0.0.49.&12&|2H      INC1   1|\cr
3004&\mixinst$+$.499.1.5.26.&13&|        ST2    PRIME+L,1|\cr
3005&\mixinst$+$.3016.0.1.41.&14&|        J1Z    2F|\cr
3006&\mixinst$+$.2.0.0.50.&15&|4H      INC2   2|\cr
3007&\mixinst$+$.2.0.2.51.&16&|        ENT3   2|\cr
3008&\mixinst$+$.0.0.2.48.&17&|6H      ENTA   0|\cr
3009&\mixinst$+$.0.2.2.55.&18&|        ENTX   0,2|\cr
3010&\mixinst$-$.1.3.5.4.&19&|        DIV    PRIME,3|\cr
3011&\mixinst$+$.3006.0.1.47.&20&|        JXZ    4B|\cr
3012&\mixinst$-$.1.3.5.56.&21&|        CMPA   PRIME,3|\cr
3013&\mixinst$+$.1.0.0.51.&22&|        INC3   1|\cr
3014&\mixinst$+$.3008.0.6.39.&23&|        JG     6B|\cr
3015&\mixinst$+$.3003.0.0.39.&24&|        JMP    2B|\cr
3016&\mixinst$+$.1995.0.18.37.&25&|2H      OUT    TITLE(OUTDEV)|\cr
3017&\mixinst$+$.2035.0.2.52.&26&|        ENT4   BUF1+10|\cr
3018&\mixinst$-$.50.0.2.53.&27&|        ENT5   -50|\cr
3019&\mixinst$+$.501.0.0.53.&28&|2H      INC5   L+1|\cr
3020&\mixinst$-$.1.5.5.8.&29&|4H      LDA    PRIME,5|\cr
3021&\mixinst$+$.0.0.1.5.&30&|        CHAR|\cr
3022&\mixinst$+$.0.4.12.31.&31&|        STX    0,4(1:4)|\cr
3023&\mixinst$+$.1.0.1.52.&32&|        DEC4   1|\cr
3024&\mixinst$+$.50.0.1.53.&33&|        DEC5   50|\cr
3025&\mixinst$+$.3020.0.2.45.&34&|        J5P    4B|\cr
3026&\mixinst$+$.0.4.18.37.&35&|        OUT    0,4(OUTDEV)|\cr
3027&\mixinst$+$.24.4.5.12.&36&|        LD4    24,4|\cr
3028&\mixinst$+$.3019.0.0.45.&37&|        J5N    2B|\cr
3029&\mixinst$+$.0.0.2.5.&38&|        HLT|\cr
\omit\global\usehruletrue&\omit&39&|* Initial contents.|\cr
\omit\global\usehruletrue&\omit&40&|        ORIG   PRIME+1|\cr
0000&\mixinst$+$.0.0.0.2.&41&|        CON    2|\cr
\omit\global\usehruletrue&\omit&42&|        ORIG   BUF0-5|\cr
1995&\mixinst$+$.393.19.22.23.&43&|TITLE   ALF  FIRST|\cr
1996&\mixinst$+$.6.9.25.5.&44&|        ALF   FIVE|\cr
1997&\mixinst$+$.8.24.15.4.&45&|        ALF   HUND|\cr
1998&\mixinst$+$.1221.4.0.17.&46&|        ALF  RED P|\cr
1999&\mixinst$+$.1225.14.5.22.&47&|        ALF  RIMES|\cr
\omit\global\usehruletrue&\omit&48&|        ORIG   BUF0+24|\cr
2024&\mixinst$+$.0.0.31.51.&49&|        CON    BUF1+10|\cr
\omit\global\usehruletrue&\omit&50&|        ORIG   BUF1+24|\cr
2049&\mixinst$+$.0.0.31.26.&51&|        CON    BUF0+10|\cr
\omit\global\usehruletrue&\omit&52&|        END    START|\cr
\omit&\omit&\omit&\omit\strut\cr
\multispan4\global\usehruletrue\leaders\hrule\hfil{\it MAIN SYMBOLS}\leaders\hrule\hfil\cr
\omit&\omit&\omit&\omit\strut\cr
L&\mixword$+$.0.0.0.7.52.&=&500\cr
OUTDEV&\mixword$+$.0.0.0.0.18.&=&18\cr
PRIME&\mixword$-$.0.0.0.0.1.&=&-1\cr
BUF0&\mixword$+$.0.0.0.31.16.&=&2000\cr
BUF1&\mixword$+$.0.0.0.31.41.&=&2025\cr
START&\mixword$+$.0.0.0.46.56.&=&3000\cr
TITLE&\mixword$+$.0.0.0.31.11.&=&1995\cr
\omit&\omit&\omit&\omit\strut\cr
\multispan4\global\usehruletrue\leaders\hrule\hfil{\it LOCAL SYMBOLS}\leaders\hrule\hfil\cr
\omit&\omit&\omit&\omit\strut\cr
\|2-1\|&\mixword$+$.0.0.0.46.59.&=&3003\cr
\|4-1\|&\mixword$+$.0.0.0.46.62.&=&3006\cr
\|6-1\|&\mixword$+$.0.0.0.47.0.&=&3008\cr
\|2-2\|&\mixword$+$.0.0.0.47.8.&=&3016\cr
\|2-3\|&\mixword$+$.0.0.0.47.11.&=&3019\cr
\|4-2\|&\mixword$+$.0.0.0.47.12.&=&3020\cr
\omit&\omit&\omit&\omit\strut\cr
\multispan4\global\usehruletrue\leaders\hrule\hfil{\it LITERALS}\leaders\hrule\hfil\cr
\omit&\omit&\omit&\omit\strut\cr
=-499=&\mixword$+$.0.0.0.32.2.&=&2050\cr
=3=&\mixword$+$.0.0.0.32.3.&=&2051\cr
\endlisting

\endchapter
\eject